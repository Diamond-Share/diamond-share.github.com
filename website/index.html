<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Diamond Share</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  </head>
<body>
<style>
.loading-overlay { 
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.95);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 999;
  backdrop-filter: blur(5px);
}

/* ======================================================= */
/* 1. –ù–û–í–û–ì–û–î–ù–ò–ô –°–¢–ò–õ–¨: –≠—Ñ—Ñ–µ–∫—Ç "–ò–Ω–µ–π" –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ */
/* ======================================================= */

/* –ü—Ä–∏–º–µ–Ω—è–µ–º –∫ —Ç–∞–π–ª–∞–º –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω */
.settings-tile,
.modal-content {
    /* –í–∞–∂–Ω–æ: —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É —ç—Ç–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ñ–æ–Ω (var(--card) –∏–ª–∏ –±–µ–ª—ã–π), 
       —á—Ç–æ–±—ã —Ç–µ–Ω—å –±—ã–ª–∞ –≤–∏–¥–Ω–∞. */
       
    /* –ò—Å–ø–æ–ª—å–∑—É–µ–º –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—É—é —Ç–µ–Ω—å –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –ò–Ω–µ—è –∏ –≥–ª—É–±–∏–Ω—ã */
    box-shadow: 
        /* 1. –≠—Ñ—Ñ–µ–∫—Ç –ò–Ω–µ—è: –°–≤–µ—Ä—Ö—É, –æ—á–µ–Ω—å —Å–≤–µ—Ç–ª—ã–π, —Å–ª–µ–≥–∫–∞ –∑–∞–º–µ—Ç–Ω—ã–π */
        0 -2px 5px -3px rgba(255, 255, 255, 0.8), 
        /* 2. –ë–∞–∑–æ–≤–∞—è —Ç–µ–Ω—å: –î–æ–±–∞–≤–ª—è–µ—Ç –≥–ª—É–±–∏–Ω—É, —á—Ç–æ–±—ã –∫–∞—Ä—Ç–æ—á–∫–∞ "–≤—ã—Å—Ç—É–ø–∞–ª–∞" */
        var(--shadow); 
}

/* –ù–û–í–û–ï: –°—Ç–∏–ª—å –¥–ª—è –ï–î–í–ê –ó–ê–ú–ï–¢–ù–û–ì–û –∏ –†–ï–î–ö–û–ì–û –º–µ—Ä—Ü–∞–Ω–∏—è */
.festive-sparkle {
    display: inline-block;
    color: var(--festive-accent, #FFD700); 
    /* –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞—Å—Ç–æ–º–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é flicker: 8 —Å–µ–∫—É–Ω–¥, –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ */
    animation: flicker 8s ease-in-out infinite; 
    margin-left: 5px;
    opacity: 0.8; /* –ù–∞—á–∞–ª—å–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –¥–ª—è "–ª–µ–≥–∫–æ–≥–æ" —ç—Ñ—Ñ–µ–∫—Ç–∞ */
}

/* –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –∫–∞–¥—Ä–æ–≤ –¥–ª—è —Ç–æ–Ω–∫–æ–≥–æ –º–µ—Ä—Ü–∞–Ω–∏—è (Flicker) */
@keyframes flicker {
    /* 90% –≤—Ä–µ–º–µ–Ω–∏ - –∏–∫–æ–Ω–∫–∞ –ø—Ä–æ—Å—Ç–æ –≤–∏–¥–Ω–∞ */
    0%, 85%, 100% { 
        opacity: 0.8; 
    }
    /* 10% –≤—Ä–µ–º–µ–Ω–∏ (–º–µ–∂–¥—É 85% –∏ 95%) - –∏–∫–æ–Ω–∫–∞ –±—ã—Å—Ç—Ä–æ –º–µ–Ω—è–µ—Ç —è—Ä–∫–æ—Å—Ç—å */
    90% { 
        opacity: 1; 
    }
    92% { 
        opacity: 0.5; 
    }
    94% {
        opacity: 1;
    }
}

.loading-container {
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
}

.loading-text {
  font-size: 24px;
  font-weight: 600;
  color: #333;
  font-family: 'Inter', sans-serif;
}

.loading-subtext {
  font-size: 12px;
  color: rgba(0, 0, 0, 0.4);
  margin-top: 5px;
  font-weight: 400;
}

.loading-subtext {
  font-size: 12px;
  color: rgba(0, 0, 0, 0.4);
  margin-top: 5px;
  font-weight: 400;
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0.7; /* –°–ª–µ–≥–∫–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π */
}

/* –ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –∞–∫—Ü–µ–Ω—Ç: –ú–µ—Ä—Ü–∞–Ω–∏–µ —ç–º–æ–¥–∑–∏ */
.festive-sparkle {
    display: inline-block;
    /* –£–º–µ–Ω—å—à–∏–º —Å–∫–æ—Ä–æ—Å—Ç—å –º–µ—Ä—Ü–∞–Ω–∏—è, —á—Ç–æ–±—ã –±—ã–ª–æ –Ω–µ –Ω–∞–≤—è–∑—á–∏–≤–æ */
    animation-duration: 4s; 
    animation-timing-function: ease-in-out;
}

</style>
  <!-- –ó–ê–ú–ï–ù–ê –ù–ê–ß–ê–õ–ê -->
<!-- –≠–ö–†–ê–ù –ü–†–ò–í–ï–¢–°–¢–í–ò–Ø -->
<div class="welcome-screen" id="welcome-screen">
  <div class="welcome-animation">
    <lottie-player 
      src="https://diamond-share.github.io/Welcome.json" 
      background="transparent" 
      speed="1" 
      autoplay
      loop
      style="width: 100%; height: 100%;">
    </lottie-player>
  </div>
  
  <h1 class="welcome-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Diamond Share</h1>
  <p class="welcome-subtitle">–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –æ–±–º–µ–Ω —Ñ–∞–π–ª–∞–º–∏ –∏ —É–¥–æ–±–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö</p>
  
  <button class="start-btn" id="startButton">–ù–∞—á–∞—Ç—å</button>
  
  <p class="policy-text">
    –ù–∞–∂–∏–º–∞—è –Ω–∞ –∫–Ω–æ–ø–∫—É –Ω–∞—á–∞—Ç—å, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å 
    <a href="policy.html" class="policy-link">—É—Å–ª–æ–≤–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a> –∏ 
    <a href="policy.html" class="policy-link">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
  </p>
</div>
<!-- –ó–ê–ú–ï–ù–ê –ö–û–ù–¶–ê -->

  <!-- –ó–ê–ú–ï–ù–ê –ù–ê–ß–ê–õ–ê -->
<!-- –≠–ö–†–ê–ù –í–í–û–î–ê USERNAME (–ó–ê–ú–ï–ù–ê –ù–ê –î–ò–ó–ê–ô–ù –ò–ó LOGI.HTML) -->
<div class="auth-screen" id="username-screen">
  <div class="login-container animate__animated animate__fadeIn">
    <div class="login-header">
      <h1>–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω</h1>
      <p>–î–ª—è –≤—Ö–æ–¥–∞ –≤ –≤–∞—à—É —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å</p>
    </div>
    
    <div class="login-animation">
      <lottie-player 
        src="https://diamond-share.github.io/login_success.json" 
        background="transparent" 
        speed="1" 
        autoplay
        loop
        style="width: 100%; height: 100%;">
      </lottie-player>
    </div>
    
    <div class="login-form">
      <div class="input-group">
        <input type="text" class="login-input" id="login-username" placeholder="@username" autocomplete="off" required>
        <div class="error-message" id="username-error" style="display: none;"></div>
      </div>
      
            <button class="login-submit-btn" id="login-continue-btn" disabled>
        –î–∞–ª–µ–µ
      </button>
      
      <div class="login-links">
        <a href="#" class="forgot-link">–ó–∞–±—ã–ª–∏ –ª–æ–≥–∏–Ω?</a>
        <a href="#" class="register-link" id="switch-to-register">–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
      </div>
    </div>
  </div>
</div>
<!-- –ó–ê–ú–ï–ù–ê –ö–û–ù–¶–ê -->

  <div class="auth-screen" id="password-screen">
  <div class="password-container">
    <div class="header">
      <h1></h1>
      <p id="password-user-login"></p>
    </div>
    
    <div class="animation-container">
      <lottie-player 
        src="https://diamond-share.github.io/Password_Authentication.json" 
        background="transparent" 
        speed="1" 
        autoplay
        loop
        style="width: 100%; height: 100%;">
      </lottie-player>
    </div>
    
    <div class="auth-form">
      <div class="input-group">
        <input type="password" class="input-field" id="login-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å" required>
        <button type="button" class="toggle-password" id="togglePassword"></button>
        <div class="error-message" id="password-error"></div>
      </div>
      
      <button type="submit" class="submit-btn" id="login-btn">–í–æ–π—Ç–∏</button>
      <button type="button" class="back-btn" id="back-to-username">–ù–∞–∑–∞–¥</button>
      
      <a href="#" class="forgot-password">–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?</a>
    </div>
  </div>
</div>

  <div class="auth-screen" id="register-screen">
    <div class="auth-container animate__animated animate__fadeIn">
      <div class="auth-header">
        <button class="back-btn" id="back-to-login">
          <i class="fas fa-arrow-left"></i>
        </button>
        <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
      </div>
      
      <div class="auth-form">
        <div class="input-field animate__animated animate__fadeInUp">
          <i class="fas fa-user"></i>
          <input type="text" id="register-name" placeholder="–í–∞—à–µ –∏–º—è" autocomplete="off">
          <div class="input-border"></div>
        </div>
        
        <div class="input-field animate__animated animate__fadeInUp animate__delay-1s">
          <i class="fas fa-at"></i>
          <input type="text" id="register-username" placeholder="@username" autocomplete="off">
          <div class="input-border"></div>
        </div>
        
        <div class="input-field animate__animated animate__fadeInUp animate__delay-1-5s">
          <i class="fas fa-lock"></i>
          <input type="password" id="register-password" placeholder="–ü–∞—Ä–æ–ª—å" autocomplete="off">
          <div class="input-border"></div>
        </div>
        
        <div class="input-field animate__animated animate__fadeInUp animate__delay-2s">
          <i class="fas fa-lock"></i>
          <input type="password" id="register-confirm" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" autocomplete="off">
          <div class="input-border"></div>
        </div>
        
        <div class="error-message" id="register-error" style="display: none; color: #ff4757; font-size: 14px; margin: 10px 0;"></div>
        
        <button class="auth-btn animate__animated animate__fadeInUp animate__delay-2-5s" id="register-btn">
          –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
        </button>
        
        <div class="auth-footer animate__animated animate__fadeIn animate__delay-3s">
          <p>–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" id="switch-to-login">–í–æ–π—Ç–∏</a></p>
        </div>
      </div>
    </div>
  </div>
  
  <div id="app" style="display: none;">

  <div class="header">
      <div class="logo">
        <div class="logo-icon">
          <i class="fas fa-sleigh"></i>
        </div>
        <span>Diamond Share <span class="festive-sparkle">‚ú®</span></span>
      </div>
      <div class="header-actions">
  <button class="header-btn desktop-settings-btn nav-item" data-screen="settings">
    <i class="fas fa-snowflake"></i> </button>

  <div class="user-avatar" id="user-avatar">
    <span id="user-avatar-text">U</span>
  </div>
</div>
    </div>

    
    <div class="search-container" id="search-container" style="display: none;">
  <div class="search-header">
    <button class="back-btn" id="search-back-btn">
      <i class="fas fa-arrow-left"></i>
    </button>
    <div class="search-input-wrapper">
      <i class="fas fa-search"></i>
      <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π..." autocomplete="off">
      <button class="clear-search" id="clear-search" style="display: none;">
        <i class="fas fa-times"></i>
      </button>
    </div>
  </div>
  <div class="search-results" id="search-results">
    <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ -->
    <div class="search-empty-state">
      <i class="fas fa-search"></i>
      <p>–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø–æ–∏—Å–∫–∞</p>
    </div>
  </div>
</div>

    <div class="main-content">
      <div class="chats-list" id="chats-list">
        <div class="empty-state">
          <div class="empty-icon">
            <i class="fas fa-comments"></i>
          </div>
          <div class="empty-title">–ù–µ—Ç —á–∞—Ç–æ–≤</div>
          <p>–î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ</p>
        </div>
      </div>

      <div class="chat-view" id="chat-view">
        <div class="chat-header">
  <div class="chat-header-content">
    <button class="back-btn" id="back-btn">
      <i class="fas fa-arrow-left"></i>
    </button>
    <div class="chat-header-avatar" id="chat-header-avatar">
      <span id="chat-header-avatar-text">C</span>
    </div>
    <div class="chat-header-info">
      <div class="chat-title-wrapper">
        <div class="chat-title" id="chat-title">–ß–∞—Ç</div>
      </div>
      <div class="chat-status" id="chat-status"></div>
    </div>
  </div>
  <div class="chat-header-actions">
    <button class="chat-action-btn" id="chat-info-btn">
      <i class="fas fa-info-circle"></i>
    </button>
  </div>
</div>
        <div class="messages-container">
          <div class="messages" id="messages"></div>
          <div class="typing-indicator" id="typing-indicator" style="display: none;">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
          </div>
        </div>
        <div class="input-area" id="input-area">

        <button class="attachment-btn-uu" id="attachment-btn">
            <i class="fas fa-paperclip"></i>
        </button>

        <div class="message-input-container-uu">
            <textarea class="message-input-uu" id="message-input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..." rows="1"></textarea>
            <button class="emoji-btn-uu" id="emoji-btn">
                <i class="far fa-smile"></i>
            </button>
        </div>

        <button class="send-btn-uu" id="send-btn" disabled>
            <i class="fas fa-paper-plane"></i>
        </button>

        <div class="attachment-menu" id="attachment-menu" style="display: none;">
          <div class="attachment-option" id="attach-sticker">
            <i class="fas fa-sticky-note"></i>
            <span>–°—Ç–∏–∫–µ—Ä</span>
          </div>
          </div>
        <div class="upload-preview" id="upload-preview" style="display: none;">
          </div>

      </div>
    </div>

    <div class="bottom-nav">
      <div class="nav-item active" data-screen="chats">
        <div class="nav-icon"><i class="fas fa-comment-dots"></i></div>
        <div class="nav-text">–ß–∞—Ç—ã</div>
      </div>
      <div class="nav-item" data-screen="contacts">
        <div class="nav-icon"><i class="fas fa-user-friends"></i></div>
        <div class="nav-text">–ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
      </div>
      <div class="nav-item" data-screen="settings">
          <div class="nav-icon"><i class="fas fa-snowflake"></i></div>
          <div class="nav-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
      </div>
    </div>
  </div>

  <div class="settings-screen" id="settings-screen">
    <div class="settings-header">
      <button class="settings-back-btn" id="settings-back-btn">
        <i class="fas fa-arrow-left"></i>
      </button>
      <div class="settings-title">–ü—Ä–æ—Ñ–∏–ª—å</div>
      <button class="settings-qr-btn" id="settings-qr-btn">
        <i class="fas fa-qrcode"></i>
      </button>
    </div>
    
    <div class="settings-profile">
      <div class="settings-avatar" id="settings-avatar">
        <img id="settings-avatar-img" src="" alt="Avatar">
        <span id="settings-avatar-text">U</span>
      </div>
      <div class="settings-name" id="settings-profile-name">
        –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        <span class="verified-badge">
          <lottie-player 
            src="https://diamond-share.github.io/verification.json" 
            background="transparent" 
            speed="1" 
            autoplay
            loop
            style="width: 26px; height: 26px;">
          </lottie-player>
        </span>
      </div>
      <div class="settings-username" id="settings-profile-username">@username</div>
    </div>
    
    <div class="settings-section">
  <div class="settings-section-title">–£—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å</div>
  <div class="tiles-container">
    
    <div class="settings-tile" id="notifications-settings-btn">
      <div class="tile-icon"><i class="fas fa-gift"></i></div>
      <div class="tile-text">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
    </div>
    
    <div class="settings-tile" id="privacy-settings-btn">
      <div class="tile-icon"><i class="fas fa-key"></i></div>
      <div class="tile-text">–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å</div>
    </div>
    
    <div class="settings-tile" id="appearance-settings-btn">
      <div class="tile-icon"><i class="fas fa-snowman"></i></div>
      <div class="tile-text">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</div>
    </div>
    
    <div class="settings-tile" id="help-settings-btn">
      <div class="tile-icon"><i class="fas fa-candy-cane"></i></div>
      <div class="tile-text">–ü–æ–º–æ—â—å</div>
    </div>
    
  </div>
</div>

    
    <div class="settings-section">
      <div class="settings-section-title">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</div>
      <div class="settings-item">
        <div class="settings-item-text">–í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</div>
        <div class="settings-item-text">2.8</div>
      </div>
      <div class="settings-item">
        <div class="settings-item-text">–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫</div>
        <div class="settings-item-text">StarPriks Company</div>
      </div>
    </div>
    
    <div class="settings-tile" onclick="showPreferences()">
      <div class="tile-icon"><i class="fas fa-heart"></i></div>
      <div class="tile-text">–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è</div>
    </div>

    
    <div class="settings-actions">
  <button class="settings-logout-btn" id="settings-logout-btn">
    <i class="fas fa-candle-holder"></i> –í—ã–π—Ç–∏
  </button>
  <button class="settings-delete-btn" id="settings-delete-btn">
    –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
  </button>
</div>

  </div>

  <div class="settings-screen" id="notifications-screen">
    <div class="settings-header">
      <button class="settings-back-btn" id="notifications-back-btn">
        <i class="fas fa-arrow-left"></i>
      </button>
      <div class="settings-title">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
    </div>
    
    <div class="settings-section">
      <div class="settings-section-title">–û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</div>
      <div class="notification-item">
        <div class="notification-label">–í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
        <label class="switch">
          <input type="checkbox" id="notifications-toggle" checked>
          <span class="slider round"></span>
        </label>
      </div>
    </div>
    
    <div class="settings-section">
      <div class="settings-section-title">–¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</div>
      <div class="notification-item">
        <div class="notification-label">–õ–∏—á–Ω—ã–µ —á–∞—Ç—ã</div>
        <label class="switch">
          <input type="checkbox" id="private-chats-toggle" checked>
          <span class="slider round"></span>
        </label>
      </div>
      <div class="notification-item">
        <div class="notification-label">–ì—Ä—É–ø–ø—ã</div>
        <label class="switch">
          <input type="checkbox" id="groups-toggle" checked>
          <span class="slider round"></span>
        </label>
      </div>
      <div class="notification-item">
        <div class="notification-label">–ö–∞–Ω–∞–ª—ã</div>
        <label class="switch">
          <input type="checkbox" id="channels-toggle" checked>
          <span class="slider round"></span>
        </label>
      </div>
      <div class="notification-item">
        <div class="notification-label">–ü—Ä–æ—á–∏–µ</div>
        <label class="switch">
          <input type="checkbox" id="other-toggle" checked>
          <span class="slider round"></span>
        </label>
      </div>
    </div>
    
    <div class="settings-section">
      <div class="settings-section-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</div>
      <div class="notification-item">
        <div class="notification-label">–ó–≤—É–∫</div>
        <label class="switch">
          <input type="checkbox" id="sounds-toggle" checked>
          <span class="slider round"></span>
        </label>
      </div>
      <div class="notification-item">
        <div class="notification-label">–í–∏–±—Ä–∞—Ü–∏—è</div>
        <label class="switch">
          <input type="checkbox" id="vibration-toggle" checked>
          <span class="slider round"></span>
        </label>
      </div>
      <div class="notification-item">
        <div class="notification-label">–ü–æ–¥—Å–≤–µ—Ç–∫–∞ —ç–∫—Ä–∞–Ω–∞</div>
        <label class="switch">
          <input type="checkbox" id="lights-toggle" checked>
          <span class="slider round"></span>
        </label>
      </div>
    </div>
  </div>

  <div class="settings-screen" id="privacy-screen">
    <div class="settings-header">
      <button class="settings-back-btn" id="privacy-back-btn">
        <i class="fas fa-arrow-left"></i>
      </button>
      <div class="settings-title">–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å</div>
    </div>
    
    <div class="settings-section">
      <div class="settings-section-title">–ö—Ç–æ –º–æ–∂–µ—Ç...</div>
      <div class="settings-item">
        <div class="settings-item-text">–í–∏–¥–µ—Ç—å –º–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</div>
        <select class="settings-select" id="phone-privacy">
          <option value="all">–í—Å–µ</option>
          <option value="contacts">–¢–æ–ª—å–∫–æ –∫–æ–Ω—Ç–∞–∫—Ç—ã</option>
          <option value="none">–ù–∏–∫—Ç–æ</option>
        </select>
      </div>
      <div class="settings-item">
        <div class="settings-item-text">–í–∏–¥–µ—Ç—å –º–æ–π —Å—Ç–∞—Ç—É—Å</div>
        <select class="settings-select" id="status-privacy">
          <option value="all">–í—Å–µ</option>
          <option value="contacts">–¢–æ–ª—å–∫–æ –∫–æ–Ω—Ç–∞–∫—Ç—ã</option>
        </select>
      </div>
    </div>
  </div>

  <div class="settings-screen" id="appearance-screen">
  <div class="settings-header">
    <button class="settings-back-btn" id="appearance-back-btn">
      <i class="fas fa-arrow-left"></i>
    </button>
    <div class="settings-title">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</div>
  </div>
  
  <div class="appearance-content">
    <!-- –°–µ–∫—Ü–∏—è —Ñ–æ–Ω–æ–≤ -->
    <div class="appearance-section">
      <div class="appearance-section-title">–§–æ–Ω—ã —á–∞—Ç–æ–≤</div>
      <div class="backgrounds-carousel" id="backgrounds-carousel">
        <div class="background-item" data-bg="1.png">
          <img src="background/1.png" alt="–§–æ–Ω 1">
          <div class="background-check">
            <i class="fas fa-check"></i>
          </div>
        </div>
        <div class="background-item" data-bg="2.png">
          <img src="background/2.png" alt="–§–æ–Ω 2">
          <div class="background-check">
            <i class="fas fa-check"></i>
          </div>
        </div>
        <div class="background-item" data-bg="3.png">
          <img src="background/3.png" alt="–§–æ–Ω 3">
          <div class="background-check">
            <i class="fas fa-check"></i>
          </div>
        </div>
        <div class="background-item" data-bg="4.png">
          <img src="background/4.png" alt="–§–æ–Ω 4">
          <div class="background-check">
            <i class="fas fa-check"></i>
          </div>
        </div>
        <div class="background-item" data-bg="5.png">
          <img src="background/5.png" alt="–§–æ–Ω 5">
          <div class="background-check">
            <i class="fas fa-check"></i>
          </div>
        </div>
      </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è —Ç–µ–º -->
    <div class="appearance-section">
      <div class="appearance-section-title">–¢–µ–º—ã</div>
      <div class="theme-options">
        <div class="theme-option" data-theme="light">
          <div class="theme-preview light">
            <div class="theme-demo">
              <div class="demo-header"></div>
              <div class="demo-messages">
                <div class="demo-message incoming"></div>
                <div class="demo-message outgoing"></div>
              </div>
            </div>
          </div>
          <div class="theme-name">–°–≤–µ—Ç–ª–∞—è</div>
        </div>
        <div class="theme-option" data-theme="dark">
          <div class="theme-preview dark">
            <div class="theme-demo">
              <div class="demo-header"></div>
              <div class="demo-messages">
                <div class="demo-message incoming"></div>
                <div class="demo-message outgoing"></div>
              </div>
            </div>
          </div>
          <div class="theme-name">–¢–µ–º–Ω–∞—è</div>
        </div>
      </div>
    </div>

    <!-- –°–µ–∫—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π -->
    <div class="appearance-section">
      <div class="appearance-section-title">–†–∞–∑–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π</div>
      <div class="font-size-controls">
        <button class="font-size-btn" id="font-size-decrease">
          <i class="fas fa-minus"></i>
        </button>
        <div class="font-size-preview">
          <div class="message-preview">
            <div class="preview-bubble">–ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è</div>
          </div>
        </div>
        <button class="font-size-btn" id="font-size-increase">
          <i class="fas fa-plus"></i>
        </button>
      </div>
      <div class="font-size-value" id="font-size-value">
        –°—Ä–µ–¥–Ω–∏–π (100%)
      </div>
    </div>
  </div>
</div>

  <div class="settings-screen" id="help-screen">
    <div class="settings-header">
      <button class="settings-back-btn" id="help-back-btn">
        <i class="fas fa-arrow-left"></i>
      </button>
      <div class="settings-title">–ü–æ–º–æ—â—å</div>
    </div>
    
    <div class="settings-section">
      <div class="settings-item">
        <div class="settings-item-text">–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</div>
        <i class="fas fa-chevron-right"></i>
      </div>
      <div class="settings-item">
        <div class="settings-item-text">–°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</div>
        <i class="fas fa-chevron-right"></i>
      </div>
    </div>
  </div>

  <div class="qr-modal" id="qr-modal">
    <div class="qr-content">
      <button class="qr-close" id="qr-close">
        <i class="fas fa-times"></i>
      </button>
      <div class="qr-title">–ú–æ–π QR-–∫–æ–¥</div>
      <div class="qr-code" id="qr-code">
        QR-–∫–æ–¥ –±—É–¥–µ—Ç –∑–¥–µ—Å—å
      </div>
      <div class="qr-username" id="qr-username">@username</div>
    </div>
  </div>

  <div class="modal" id="add-chat-modal">
    <div class="modal-content">
      <div class="tabs">
        <div class="tab active" data-tab="contact">–õ–∏—á–Ω—ã–π —á–∞—Ç</div>
        <div class="tab" data-tab="group"></div>
      </div>
      
      <div id="contact-tab-content">
        <h3 class="modal-title">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç</h3>
        <input type="text" class="modal-input" id="contact-username" placeholder="@username">
        <div class="modal-actions">
          <button class="btn btn-secondary" id="cancel-add-contact">–û—Ç–º–µ–Ω–∞</button>
          <button class="btn btn-primary" id="confirm-add-contact">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
      </div>
      
      <div id="group-tab-content" style="display: none;">
        <h3 class="modal-title">–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É BETA</h3>
        <input type="text" class="modal-input" id="group-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã" required>
        <input type="text" class="modal-input" id="group-members" placeholder="@user1, @user2" required>
        <p class="hint-text">–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é</p>
        <div class="modal-actions">
          <button class="btn btn-secondary" id="cancel-create-group">–û—Ç–º–µ–Ω–∞</button>
          <button class="btn btn-primary" id="confirm-create-group">–°–æ–∑–¥–∞—Ç—å</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="share-modal">
    <div class="modal-content">
      <h3 class="modal-title">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ—Ñ–∏–ª–µ–º</h3>
      <p>–ü—Ä–∏–≤–µ—Ç! –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫–æ –º–Ω–µ –≤ Diamond Share. –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å: <strong id="share-username"></strong></p>
      <div class="modal-actions">
        <button class="btn btn-secondary" id="copy-share-link">
          <i class="fas fa-copy"></i> –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
        </button>
        <button class="btn btn-primary" id="share-telegram">
          <i class="fab fa-telegram"></i> Telegram
        </button>
        <button class="btn btn-primary" id="share-whatsapp">
          <i class="fab fa-whatsapp"></i> WhatsApp
        </button>
      </div>
    </div>
  </div>

  <div class="image-preview-modal" id="image-preview-modal">
    <div class="image-preview-content">
      <button class="close-preview" id="close-preview">
        <i class="fas fa-times"></i>
      </button>
      <img id="preview-image" src="" alt="Preview">
    </div>
  </div>

  <div class="modal" id="stickers-modal">
    <div class="modal-content">
      <h3 class="modal-title">–°—Ç–∏–∫–µ—Ä—ã</h3>
      <div class="stickers-tabs">
        <div class="sticker-tab active" data-pack="panda">–ü–∞–Ω–¥–∞</div>
        <div class="sticker-tab" data-pack="cat">–ê–∫—É–ª—ë–Ω–æ–∫</div>
        <div class="sticker-tab" data-pack="dog">–ö–æ—Ç–∏–∫</div>
        <div class="sticker-tab" data-pack="bigi">–ë–∏–≥–∏</div>
        <div class="sticker-tab" data-pack="akio">–ê–∫–∏–æ</div>
        <div class="sticker-tab" data-pack="rebi">–†–µ–±–∏</div>
        <div class="sticker-tab" data-pack="work">–†–∞–±–æ—Ç—è–≥–∞</div>
        <div class="sticker-tab" data-pack="belka">–ë–µ–ª–∫–∞</div>
      </div>
      <div class="stickers-container" id="stickers-container">
      </div>
      <div class="modal-actions">
        <button class="btn btn-secondary" id="close-stickers">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  </div>

  <div class="message-context-menu" id="message-context-menu">
    <div class="context-menu-item" id="copy-message">
      <i class="fas fa-copy"></i> –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
    </div>
    <div class="context-menu-item" id="reply-message">
      <i class="fas fa-reply"></i> –û—Ç–≤–µ—Ç–∏—Ç—å
    </div>
    <div class="context-menu-item" id="forward-message">
      <i class="fas fa-share"></i> –ü–µ—Ä–µ—Å–ª–∞—Ç—å
    </div>
    <div class="context-menu-item" id="delete-message">
      <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å
    </div>
  </div>

  <div class="forward-modal" id="forward-modal">
    <div class="modal-content">
      <h3 class="modal-title">–ü–µ—Ä–µ—Å–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</h3>
      <div class="chats-list" id="forward-chats-list"></div>
      <div class="modal-actions">
        <button class="btn btn-secondary" id="cancel-forward">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn btn-primary" id="confirm-forward">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <div class="custom-modal" id="custom-modal">
    <div class="custom-modal-content">
      <div class="custom-modal-header">
        <h3 class="custom-modal-title" id="custom-modal-title">Title</h3>
        <button class="custom-modal-close" id="custom-modal-close">&times;</button>
      </div>
      <div class="custom-modal-body" id="custom-modal-body">
        Message content
      </div>
      <div class="custom-modal-footer" id="custom-modal-footer">
        <button class="btn btn-secondary" id="custom-modal-cancel">Cancel</button>
        <button class="btn btn-primary" id="custom-modal-confirm">OK</button>
      </div>
    </div>
  </div>
  
  <div class="modal" id="avatar-modal">
    <div class="modal-content">
      <h3 class="modal-title">–í—ã–±–µ—Ä–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä</h3>
      <div class="avatar-carousel" id="avatar-carousel">
      </div>
      <div class="avatar-carousel-nav" id="avatar-carousel-nav">
      </div>
      <div class="modal-actions">
        <button class="btn btn-secondary" id="cancel-avatar-select">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn btn-primary" id="confirm-avatar-select">–í—ã–±—Ä–∞—Ç—å</button>
      </div>
    </div>
  </div>
  
  <div id="loading-overlay" class="loading-overlay">
  <div class="loading-container">
    <div class="loading-animation">
      <lottie-player 
        src="https://diamond-share.github.io/loading_1.json" 
        background="transparent" 
        speed="1" 
        autoplay
        loop
        style="width: 390px; height: 390px;">
      </lottie-player>
    </div>
    <div class="loading-text">
      Diamond Share
      <div class="loading-subtext">StarPriks 2025</div>
    </div>
  </div>
</div>
  
  <div class="settings-screen" id="preferences-screen">
    <div class="settings-header">
      <button class="settings-back-btn" onclick="showScreen('settings')">
        <i class="fas fa-arrow-left"></i>
      </button>
      <div class="settings-title">–ú–æ–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è</div>
    </div>
    
    <div class="settings-tile" onclick="showFriendSearch()">
  <div class="tile-icon"><i class="fas fa-users"></i></div>
  <div class="tile-text">–ù–∞–π—Ç–∏ –¥—Ä—É–≥–∞ –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º</div>
</div>

    <div class="preferences-container">
    <div class="preference-group">
      <label>–õ—é–±–∏–º—ã–π —Ü–≤–µ—Ç</label>
      <select id="pref-color">
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>
        <option>–ö—Ä–∞—Å–Ω—ã–π</option><option>–°–∏–Ω–∏–π</option><option>–ó–µ–ª–µ–Ω—ã–π</option>
        <option>–ñ–µ–ª—Ç—ã–π</option><option>–§–∏–æ–ª–µ—Ç–æ–≤—ã–π</option><option>–†–æ–∑–æ–≤—ã–π</option>
        <option>–ß–µ—Ä–Ω—ã–π</option><option>–ë–µ–ª—ã–π</option><option>–û—Ä–∞–Ω–∂–µ–≤—ã–π</option>
        <option>–°–µ—Ä—ã–π</option><option>–ë–∏—Ä—é–∑–æ–≤—ã–π</option><option>–ë–æ—Ä–¥–æ–≤—ã–π</option>
        <option>–ì–æ–ª—É–±–æ–π</option><option>–°–∞–ª–∞—Ç–æ–≤—ã–π</option><option>–°–∏—Ä–µ–Ω–µ–≤—ã–π</option>
      </select>
    </div>

    <div class="preference-group">
      <label>–õ—é–±–∏–º—ã–π –≤–∫—É—Å</label>
      <select id="pref-flavor">
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option>
        <option>–°–ª–∞–¥–∫–∏–π</option><option>–°–æ–ª—ë–Ω—ã–π</option><option>–ö–∏—Å–ª—ã–π</option>
        <option>–ì–æ—Ä—å–∫–∏–π</option><option>–®–æ–∫–æ–ª–∞–¥–Ω—ã–π</option><option>–ú—è—Ç–Ω—ã–π</option>
      </select>
    </div>

    <div class="preference-group">
      <label>–õ—é–±–∏–º—ã–π —Å—Ç–∏–ª—å –º—É–∑—ã–∫–∏</label>
      <select id="pref-music">
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option>
        <option>–ü–æ–ø</option><option>–†–æ–∫</option><option>–•–∏–ø-—Ö–æ–ø</option>
        <option>–î–∂–∞–∑</option><option>–ö–ª–∞—Å—Å–∏–∫–∞</option><option>–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è</option>
      </select>
    </div>

    <div class="preference-group">
      <label>–õ—é–±–∏–º–æ–µ –≤—Ä–µ–º—è –≥–æ–¥–∞</label>
      <select id="pref-season">
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option>
        <option>–í–µ—Å–Ω–∞</option><option>–õ–µ—Ç–æ</option><option>–û—Å–µ–Ω—å</option><option>–ó–∏–º–∞</option>
      </select>
    </div>

    <div class="preference-group">
      <label>–õ—é–±–∏–º–æ–µ —Ö–æ–±–±–∏</label>
      <select id="pref-hobby">
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶</option>
        <option>–ß—Ç–µ–Ω–∏–µ –∫–Ω–∏–≥</option><option>–°–ø–æ—Ä—Ç</option><option>–†–∏—Å–æ–≤–∞–Ω–∏–µ</option>
        <option>–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</option><option>–ö—É–ª–∏–Ω–∞—Ä–∏—è</option><option>–ú—É–∑—ã–∫–∞</option>
      </select>
    </div>

    <button class="btn btn-primary" onclick="savePreferences()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  </div>
  
  <div class="qr-modal" id="qr-modal">
    <div class="qr-content">
      <button class="qr-close" id="qr-close">
        <i class="fas fa-times"></i>
      </button>
      <div class="qr-title">–ú–æ–π QR-–∫–æ–¥</div>
      <div class="qr-code" id="qr-code"></div>
      <div class="qr-username" id="qr-username"></div>
      <div class="qr-actions">
        <button class="qr-btn share" onclick="shareQR()">
          <i class="fas fa-share-alt"></i> –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
        </button>
        <button class="qr-btn save" onclick="saveQR()">
          <i class="fas fa-download"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
        </button>
      </div>
    </div>
  </div>
  
  <div class="friend-search-modal" id="friend-search-modal" style="display: none;">
  <div class="friend-search-container">
    <div class="friend-search-header">
      <button class="friend-search-back" onclick="hideFriendSearch()">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h2>–ù–∞–π—Ç–∏ –¥—Ä—É–≥–∞ –ø–æ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º</h2>
    </div>
    
    <div class="friend-search-animation" id="friend-search-animation">
      <div class="searching-icon">
        <div class="searching-person">
          <i class="fas fa-user"></i>
        </div>
        <div class="searching-waves">
          <div class="wave wave-1"></div>
          <div class="wave wave-2"></div>
          <div class="wave wave-3"></div>
        </div>
        <div class="searching-hearts">
          <div class="heart heart-1">‚ù§Ô∏è</div>
          <div class="heart heart-2">‚ù§Ô∏è</div>
          <div class="heart heart-3">‚ù§Ô∏è</div>
        </div>
      </div>
      <div class="searching-text">
        <p>–ò—â–µ–º –≤–∞–º –¥—Ä—É–∑–µ–π –ø–æ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º...</p>
      </div>
    </div>
    
    <div class="fullscreen-animation-modal" id="fullscreen-animation-modal" style="display: none;">
      <div class="fullscreen-animation-content">
        <button class="close-fullscreen-animation" id="close-fullscreen-animation">
          <i class="fas fa-times"></i>
        </button>
        <lottie-player 
          id="fullscreen-animation-player"
          src="https://diamond-share.github.io/verification_good.json" 
          background="transparent" 
          speed="1" 
          autoplay
          loop
          style="width: 100%; height: 100%;">
        </lottie-player>
      </div>
    </div>
    
    <div class="friend-results" id="friend-results" style="display: none;">
      <div class="results-header">
        <h3>–ù–∞–π–¥–µ–Ω–Ω—ã–µ –¥—Ä—É–∑—å—è</h3>
        <p>–õ—é–¥–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–¥–µ–ª—è—é—Ç –≤–∞—à–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã</p>
      </div>
      
      <div class="results-list" id="results-list">
      </div>
      
      <div class="results-actions">
        <button class="btn btn-secondary" onclick="restartFriendSearch()">
          <i class="fas fa-redo"></i> –ò—Å–∫–∞—Ç—å —Å–Ω–æ–≤–∞
        </button>
        <button class="btn btn-primary" onclick="hideFriendSearch()">
          <i class="fas fa-check"></i> –ì–æ—Ç–æ–≤–æ
        </button>
      </div>
    </div>
  </div>
</div>

  <input type="file" id="avatar-upload-input" accept="image/*" style="display: none;">

  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <script src="app.js"></script>
  <script src="showscreeen.js"></script>
  <script src="api.js"></script>
<style>

/* –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 2: –°—Ç–∏–ª–∏ –¥–ª—è .messages-container */
/* –ù–û–í–û–ï –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 2: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–∫—Ä–æ–ª–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏–π */
.messages-container {
  position: relative !important;
  flex-grow: 1 !important; /* –ó–∞–Ω—è—Ç—å –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –º–µ—Å—Ç–æ */
  padding: 0 0 0px 0 !important; /* <-- –ò–ó–ú–ï–ù–ï–ù–û: –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –Ω–∏–∂–Ω–∏–π –æ—Ç—Å—Ç—É–ø */
  overflow-y: auto !important;
  overflow-x: hidden !important; /* <-- –î–û–ë–ê–í–õ–ï–ù–û: –ó–∞–ø—Ä–µ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∏–Ω–≥–∞ */
  display: flex !important;
  flex-direction: column !important;
  justify-content: flex-end !important; /* –ü—Ä–∏–∂–∏–º–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∫ –Ω–∏–∑—É */
  gap: 2px;
  padding-left: 9px !important;
  padding-right: 9px !important;
  background-color: var(--chat-bg, #e6ebee);
  background-image: url('pattern.png');
  background-attachment: fixed;
}


/* –ù–û–í–û–ï –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 3: –£–¥–∞–ª—è–µ–º –ª—é–±—ã–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤–Ω—É—Ç—Ä–∏ */
.messages {
    padding: 0 !important;
    margin: 0 !important;
}

/* –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 4: –£–¥–∞–ª—è–µ–º –≤–æ–∑–º–æ–∂–Ω—ã–π –ª–∏—à–Ω–∏–π –Ω–∏–∂–Ω–∏–π –æ—Ç—Å—Ç—É–ø —É –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è */
.messages-container .message:last-child {
  margin-bottom: 0 !important; 
}

/* ---------- –û—Ç–∫–ª—é—á–∞–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏ ---------- */
const badRules = [

  '.message-bubble { border-radius: 18px; }',    /* —Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ */
  '.message.incoming .message-bubble { background: var(--incoming-bubble); }',
  '.message.outgoing .message-bubble { background: var(--outgoing-bubble); }',
  'body { -webkit-user-select: none; }'          /* –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ */
];

const style = document.createElement('style');
style.id = 'fix-styles';
badRules.forEach(r => style.sheet.insertRule(r.replace(/;/g,' !important;')));
document.head.appendChild(style);

/* ======================================================= */
/* !!! –û–ö–û–ù–ß–ê–¢–ï–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü–†–û–ö–†–£–¢–ö–ê –ß–ê–¢–û–í !!! */
/* ======================================================= */

/* 1. –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: –ó–∞—Å—Ç–∞–≤–ª—è–µ–º BODY –±—ã—Ç—å Flex-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º */
/* (–£–±–∏—Ä–∞–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä #app, —Ç–∞–∫ –∫–∞–∫ –µ–≥–æ –Ω–µ—Ç –≤ DOM, –∏ –ø—Ä–∏–º–µ–Ω—è–µ–º –∫ body) */
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden !important; /* –ì–ª–æ–±–∞–ª—å–Ω–æ –∑–∞–ø—Ä–µ—â–∞–µ–º –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
}

body {
    height: 100vh; 
    display: flex;
    flex-direction: column; /* –ù–∞–ø—Ä–∞–≤–ª—è–µ–º flex-—ç–ª–µ–º–µ–Ω—Ç—ã (header, main-content) –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
    overflow: hidden !important; 
}

/* 2. –ö–æ–Ω—Ç–µ–Ω—Ç–Ω–∞—è –æ–±–ª–∞—Å—Ç—å: –†–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –µ–µ */
.main-content {
    flex-grow: 1 !important; 
    display: flex;
    flex-direction: column;
    overflow: hidden !important; 
    /* üåü –ö–õ–Æ–ß–ï–í–û–ï –î–û–ü–û–õ–ù–ï–ù–ò–ï: 
       –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ .main-content (flex-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
       –º–æ–∂–µ—Ç —Å–∂–∏–º–∞—Ç—å—Å—è, –ø–æ–∑–≤–æ–ª—è—è –¥–æ—á–µ—Ä–Ω–µ–º—É .chats-list (flex-item)
       –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å–≤–æ—é –≤—ã—Å–æ—Ç—É –∏ –≤–∫–ª—é—á–∏—Ç—å overflow. */
    min-height: 0;
}

/* 3. –°–ø–∏—Å–æ–∫ –ß–∞—Ç–æ–≤: –†–∞–∑—Ä–µ—à–∞–µ–º –µ–º—É —Ä–∞—Å—Ç–∏ –∏ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å—Å—è */
.chats-list { 
    /* üí• –£–î–ê–õ–Ø–ï–ú –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô –†–ê–°–ß–ï–¢ –í–´–°–û–¢–´:
       height: calc(100vh - 110px) !important; */
    
    /* üí• –ö–õ–Æ–ß: –ó–∞—Å—Ç–∞–≤–ª—è–µ–º .chats-list –∑–∞–Ω—è—Ç—å 100% –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ
       –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –≤–Ω—É—Ç—Ä–∏ .main-content (–∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É) */
    flex-grow: 1 !important; 
    
    /* üí• –ö–õ–Æ–ß: –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç –º–æ–∂–µ—Ç —Å–∂–∏–º–∞—Ç—å—Å—è */
    min-height: 0 !important; 

    /* –ö–ê–¢–ï–ì–û–†–ò–ß–ù–û–ï –í–ö–õ–Æ–ß–ï–ù–ò–ï –ü–†–û–ö–†–£–¢–ö–ò */
    overflow-y: auto !important; 
    overflow-x: hidden !important; 
    
    /* –û—Ç—Å—Ç—É–ø, —á—Ç–æ–±—ã —á–∞—Ç—ã –Ω–µ –ø—Ä—è—Ç–∞–ª–∏—Å—å –ø–æ–¥ bottom-nav (–æ—Å—Ç–∞–≤–ª—è–µ–º) */
    padding-bottom: 70px !important; 
}

</style>
</body>
</html>