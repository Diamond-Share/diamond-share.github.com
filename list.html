<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Push –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
            margin-top: 20px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
            font-size: 28px;
        }
        
        .btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
            width: 100%;
            max-width: 300px;
        }
        
        .btn:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-success {
            background-color: #28a745;
        }
        
        .btn-success:hover {
            background-color: #1e7e34;
        }
        
        .status {
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 16px;
        }
        
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }
        
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }
        
        .status.info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }
        
        .notification-list {
            margin-top: 30px;
            text-align: left;
        }
        
        .notification-item {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-left: 5px solid #007bff;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .fake-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            border-left: 5px solid #28a745;
            max-width: 300px;
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .btn {
                font-size: 16px;
                padding: 12px 20px;
            }
            
            .fake-notification {
                top: 10px;
                right: 10px;
                left: 10px;
                max-width: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div style="font-size: 48px; margin-bottom: 20px;">üîî</div>
        <h1>Push –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h1>
        
        <div class="status info" id="status">
            –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        </div>
        
        <button class="btn" id="requestPermission">
            üì≤ –†–∞–∑—Ä–µ—à–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        </button>
        
        <button class="btn btn-success" id="sendNotification" disabled>
            üöÄ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        </button>
        
        <div class="notification-list">
            <h3>üìã –ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:</h3>
            <div id="notificationHistory"></div>
        </div>
    </div>

    <div id="fakeNotificationsContainer"></div>

    <script>
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const requestPermissionBtn = document.getElementById('requestPermission');
        const sendNotificationBtn = document.getElementById('sendNotification');
        const statusDiv = document.getElementById('status');
        const notificationHistory = document.getElementById('notificationHistory');
        const fakeNotificationsContainer = document.getElementById('fakeNotificationsContainer');
        
        // –°–ø–∏—Å–æ–∫ —Å–ª—É—á–∞–π–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        const randomNotifications = [
            "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ —Ç–≤–æ–∏ –¥–µ–ª–∞? üëã",
            "–£ —Ç–µ–±—è –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ! üí¨",
            "–ù–µ –∑–∞–±—É–¥—å –æ –≤—Å—Ç—Ä–µ—á–µ —Å–µ–≥–æ–¥–Ω—è üóìÔ∏è",
            "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ! üîÑ",
            "–ü–æ–ª—É—á–µ–Ω –Ω–æ–≤—ã–π –∑–∞–∫–∞–∑! üéÅ",
            "–ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ—é –ø–æ—á—Ç—É üìß",
            "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –ø–æ–∑–≤–æ–Ω–∏—Ç—å –º–∞–º–µ üìû",
            "–¢–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω! ‚úÖ",
            "–ü–æ–ª—É—á–µ–Ω –Ω–æ–≤—ã–π –æ—Ç–∑—ã–≤! ‚≠ê",
            "–ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω! üí∞",
            "–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ! üèÜ",
            "–ù–æ–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç–µ–±—è! üî•",
            "–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ! üéØ",
            "–í—Ä–µ–º—è –¥–ª—è –ø–µ—Ä–µ—Ä—ã–≤–∞! ‚òï"
        ];
        
        // –°–ª—É—á–∞–π–Ω—ã–µ –∏–∫–æ–Ω–∫–∏
        const randomIcons = ["üîî", "üì±", "üíé", "üéÅ", "‚≠ê", "üöÄ", "üí°", "üëã", "üèÜ", "üí∞", "üéØ", "üî•"];
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function checkNotificationSupport() {
            if (!('Notification' in window)) {
                statusDiv.textContent = '‚ùå –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è';
                statusDiv.className = 'status error';
                return false;
            }
            return true;
        }
        
        // –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
        async function requestNotificationPermission() {
            if (!checkNotificationSupport()) return;
            
            try {
                const permission = await Notification.requestPermission();
                handlePermissionResult(permission);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                statusDiv.textContent = '‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è';
                statusDiv.className = 'status error';
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        function handlePermissionResult(permission) {
            if (permission === 'granted') {
                statusDiv.textContent = '‚úÖ –û—Ç–ª–∏—á–Ω–æ! –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω—ã';
                statusDiv.className = 'status success';
                sendNotificationBtn.disabled = false;
                requestPermissionBtn.disabled = true;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                setTimeout(() => {
                    showNotification('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!', '–¢–µ–ø–µ—Ä—å —Ç—ã –±—É–¥–µ—à—å –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è');
                }, 1000);
                
            } else if (permission === 'denied') {
                statusDiv.textContent = '‚ùå –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã. –†–∞–∑—Ä–µ—à–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞';
                statusDiv.className = 'status error';
                sendNotificationBtn.disabled = true;
            } else {
                statusDiv.textContent = '‚ö†Ô∏è –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ';
                statusDiv.className = 'status info';
                sendNotificationBtn.disabled = true;
            }
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
        function showNotification(title, message) {
            const icon = randomIcons[Math.floor(Math.random() * randomIcons.length)];
            
            // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–∫–∞–∑–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            if (Notification.permission === 'granted') {
                try {
                    const options = {
                        body: message,
                        icon: '/favicon.ico'
                    };
                    
                    const notification = new Notification(`${icon} ${title}`, options);
                    
                    // –ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ
                    setTimeout(() => notification.close(), 5000);
                    
                    // –ö–ª–∏–∫ –ø–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—é
                    notification.onclick = () => {
                        window.focus();
                        notification.close();
                    };
                    
                } catch (error) {
                    console.log('–ù–∞—Å—Ç–æ—è—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º fake');
                    showFakeNotification(title, message, icon);
                }
            } else {
                showFakeNotification(title, message, icon);
            }
            
            // –í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
            addToHistory(title, message, icon);
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å fake-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showFakeNotification(title, message, icon) {
            const fakeNotification = document.createElement('div');
            fakeNotification.className = 'fake-notification';
            fakeNotification.innerHTML = `
                <strong>${icon} ${title}</strong><br>
                <small>${message}</small>
            `;
            
            fakeNotificationsContainer.appendChild(fakeNotification);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                fakeNotification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    if (fakeNotification.parentNode) {
                        fakeNotification.parentNode.removeChild(fakeNotification);
                    }
                }, 300);
            }, 5000);
            
            // –ö–ª–∏–∫ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
            fakeNotification.onclick = () => {
                fakeNotification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    if (fakeNotification.parentNode) {
                        fakeNotification.parentNode.removeChild(fakeNotification);
                    }
                }, 300);
            };
        }
        
        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–ª—É—á–∞–π–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function sendRandomNotification() {
            const randomIndex = Math.floor(Math.random() * randomNotifications.length);
            const message = randomNotifications[randomIndex];
            const title = "–ù–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ";
            
            showNotification(title, message);
        }
        
        // –î–æ–±–∞–≤–∏—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—é
        function addToHistory(title, message, icon) {
            const time = new Date().toLocaleTimeString();
            const item = document.createElement('div');
            item.className = 'notification-item';
            item.innerHTML = `
                <strong>${icon} ${title}</strong><br>
                ${message}<br>
                <small>‚è∞ ${time}</small>
            `;
            notificationHistory.prepend(item);
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é
            if (notificationHistory.children.length > 8) {
                notificationHistory.removeChild(notificationHistory.lastChild);
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            if (!checkNotificationSupport()) return;
            
            if (Notification.permission === 'granted') {
                statusDiv.textContent = '‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —É–∂–µ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã!';
                statusDiv.className = 'status success';
                sendNotificationBtn.disabled = false;
                requestPermissionBtn.disabled = true;
            } else if (Notification.permission === 'denied') {
                statusDiv.textContent = '‚ùå –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã. –†–∞–∑—Ä–µ—à–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞';
                statusDiv.className = 'status error';
                sendNotificationBtn.disabled = true;
                requestPermissionBtn.disabled = true;
            }
        }
        
        // –°–æ–±—ã—Ç–∏—è
        requestPermissionBtn.addEventListener('click', requestNotificationPermission);
        sendNotificationBtn.addEventListener('click', sendRandomNotification);
        
        // –ó–∞–ø—É—Å–∫
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
