<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeoPhone</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        :root {
            --primary: #007AFF;
            --primary-dark: #0056CC;
            --background: #000000;
            --surface: #1C1C1E;
            --card: #2C2C2E;
            --text-primary: #FFFFFF;
            --text-secondary: #8E8E93;
            --accent: #FF2D55;
            --success: #32D74B;
            --gradient: linear-gradient(135deg, #007AFF 0%, #5856D6 100%);
            --glass: rgba(255, 255, 255, 0.1);
        }

        body {
            background: var(--background);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 45, 85, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(0, 122, 255, 0.15) 0%, transparent 50%);
            animation: bgMove 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes bgMove {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(180deg); }
        }

        .screen { 
            display: none; 
            padding: 20px; 
            height: 100vh; 
            overflow-y: auto;
        }
        
        .screen.active { 
            display: block; 
        }

        .header {
            padding: 50px 30px 25px;
            text-align: center;
            position: relative;
            flex-shrink: 0;
        }

        .logo {
            width: 60px;
            height: 60px;
            background: var(--gradient);
            border-radius: 16px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 8px 32px rgba(0, 122, 255, 0.3);
            animation: logoFloat 3s ease-in-out infinite;
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .header h1 {
            font-size: 36px;
            font-weight: 800;
            background: var(--gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 6px;
            letter-spacing: -0.5px;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 16px;
            font-weight: 500;
        }

        .tab-bar {
            display: flex;
            background: var(--surface);
            margin: 0 20px 20px;
            border-radius: 20px;
            padding: 6px;
            position: relative;
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass);
            flex-shrink: 0;
        }

        .tab {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            font-size: 16px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 1;
            border-radius: 14px;
        }

        .tab.active {
            color: var(--text-primary);
        }

        .tab-indicator {
            position: absolute;
            top: 6px;
            left: 6px;
            width: calc(25% - 12px);
            height: calc(100% - 12px);
            background: var(--gradient);
            border-radius: 14px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 20px rgba(0, 122, 255, 0.3);
        }

        .content {
            flex: 1;
            overflow-y: auto;
            padding: 0 20px 20px;
            display: flex;
            flex-direction: column;
        }

        .tab-content {
            display: none;
            flex: 1;
            animation: fadeIn 0.5s ease;
            overflow-y: auto;
        }

        .tab-content.active {
            display: flex;
            flex-direction: column;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* –ò–∑–±—Ä–∞–Ω–Ω–æ–µ */
        .favorites-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            padding: 10px 0;
            flex: 1;
        }

        .favorite-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            padding: 10px;
        }

        .favorite-avatar {
            width: 70px;
            height: 70px;
            border-radius: 20px;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 24px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .favorite-avatar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .favorite-avatar:active::before {
            left: 100%;
        }

        .favorite-avatar:active {
            transform: scale(0.95);
        }

        .favorite-name {
            font-size: 14px;
            font-weight: 600;
            text-align: center;
            color: var(--text-primary);
        }

        .favorite-add {
            background: var(--card);
            border: 2px dashed var(--text-secondary);
            color: var(--text-secondary);
            font-size: 28px;
            font-weight: 300;
        }

        /* –ù–µ–¥–∞–≤–Ω–∏–µ */
        .recent-calls {
            background: var(--surface);
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid var(--glass);
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .call-item {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            transition: background 0.3s ease;
            flex-shrink: 0;
        }

        .call-item:last-child {
            border-bottom: none;
        }

        .call-item:active {
            background: var(--card);
        }

        .call-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 16px;
        }

        .call-incoming {
            background: var(--success);
        }

        .call-outgoing {
            background: var(--primary);
        }

        .call-missed {
            background: var(--accent);
        }

        .call-info {
            flex-grow: 1;
        }

        .call-name {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .call-details {
            font-size: 14px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
        }

        .call-time {
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        /* –ö–æ–Ω—Ç–∞–∫—Ç—ã */
        .search-container {
            padding: 16px 20px;
            position: relative;
            background: var(--surface);
            border-radius: 20px;
            margin-bottom: 15px;
            border: 1px solid var(--glass);
            flex-shrink: 0;
        }

        .search-box {
            width: 100%;
            padding: 14px 20px 14px 45px;
            background: var(--card);
            border: none;
            border-radius: 14px;
            font-size: 16px;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .search-box:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary);
        }

        .search-icon {
            position: absolute;
            left: 32px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 16px;
        }

        .contact-list {
            background: var(--surface);
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid var(--glass);
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .contact-item {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            transition: background 0.3s ease;
            flex-shrink: 0;
        }

        .contact-item:last-child {
            border-bottom: none;
        }

        .contact-item:active {
            background: var(--card);
        }

        .contact-avatar {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 18px;
            margin-right: 15px;
        }

        .contact-info {
            flex-grow: 1;
        }

        .contact-name {
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .contact-phone {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ */
        .keypad-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .phone-number {
            font-size: 36px;
            font-weight: 300;
            letter-spacing: 1px;
            margin-bottom: 30px;
            padding: 20px;
            text-align: center;
            background: var(--surface);
            border-radius: 20px;
            border: 1px solid var(--glass);
            font-feature-settings: "tnum";
            flex-shrink: 0;
        }

        .keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            flex: 1;
            min-height: 0;
            margin-bottom: 20px;
        }

        .key {
            width: 70px;
            height: 70px;
            border-radius: 35px;
            background: var(--card);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: 300;
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--glass);
            user-select: none;
            -webkit-user-select: none;
        }

        .key::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .key:active::before {
            opacity: 0.1;
        }

        .key:active {
            transform: scale(0.95);
        }

        .key .letters {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 2px;
            font-weight: 500;
            position: relative;
            z-index: 1;
        }

        .key .number {
            position: relative;
            z-index: 1;
        }

        .key-call {
            background: var(--success);
            grid-column: 2;
        }

        .key-call:active {
            background: #28a745;
        }

        .key-delete {
            background: transparent;
            color: var(--accent);
            font-size: 22px;
        }

        .call-controls {
            display: flex;
            justify-content: space-between;
            padding: 0 30px;
            flex-shrink: 0;
        }

        .control {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .control-button {
            width: 55px;
            height: 55px;
            border-radius: 28px;
            background: var(--card);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 6px;
            color: var(--primary);
            font-size: 22px;
            transition: all 0.3s ease;
            border: 1px solid var(--glass);
        }

        .control-button:active {
            transform: scale(0.95);
            background: var(--primary);
            color: white;
        }

        .control-label {
            font-size: 11px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        /* –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è */
        .register-card {
            background: var(--surface);
            border-radius: 20px;
            padding: 25px;
            margin: 0 20px;
            border: 1px solid var(--glass);
        }

        .register-input {
            width: 100%;
            padding: 15px;
            background: var(--card);
            border: 1px solid var(--glass);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 16px;
            margin-bottom: 15px;
        }

        .register-btn {
            width: 100%;
            padding: 15px;
            background: var(--gradient);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        /* –í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ */
        .incoming-call {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        .incoming-call.active {
            display: flex;
        }
        
        .caller-info {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .caller-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50px;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            margin: 0 auto 20px;
        }
        
        .caller-name {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .caller-phone {
            font-size: 18px;
            color: var(--text-secondary);
        }
        
        .call-actions {
            display: flex;
            gap: 30px;
        }
        
        .accept-call {
            width: 80px;
            height: 80px;
            border-radius: 40px;
            background: var(--success);
            border: none;
            color: white;
            font-size: 30px;
            cursor: pointer;
        }
        
        .reject-call {
            width: 80px;
            height: 80px;
            border-radius: 40px;
            background: var(--accent);
            border: none;
            color: white;
            font-size: 30px;
            cursor: pointer;
        }

        /* –ó–≤–æ–Ω–æ–∫ */
        .video-container { 
            position: relative; 
            width: 100%; 
            height: 70vh; 
            background: var(--surface); 
            border-radius: 15px; 
            overflow: hidden; 
            border: 1px solid var(--glass);
        }
        
        .local-video { 
            position: absolute; 
            bottom: 20px; 
            right: 20px; 
            width: 120px; 
            height: 160px; 
            border-radius: 10px; 
            border: 2px solid var(--text-primary); 
            object-fit: cover; 
            z-index: 10;
        }
        
        .remote-video { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
        }
        
        .call-controls { 
            position: fixed; 
            bottom: 30px; 
            left: 0; 
            right: 0; 
            display: flex; 
            justify-content: center; 
            gap: 20px; 
        }
        
        .call-control-btn { 
            width: 60px; 
            height: 60px; 
            border-radius: 50%; 
            border: none; 
            background: var(--gradient); 
            color: white; 
            font-size: 20px; 
            cursor: pointer; 
        }
        
        .end-call { 
            background: var(--accent); 
            width: 70px; 
            height: 70px; 
        }

        .loader { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.8); 
            z-index: 9999; 
            justify-content: center; 
            align-items: center; 
            flex-direction: column; 
        }
        
        .loader.active { 
            display: flex; 
        }
        
        .spinner { 
            width: 40px; 
            height: 40px; 
            border: 4px solid rgba(255,255,255,0.3); 
            border-radius: 50%; 
            border-top-color: var(--primary); 
            animation: spin 1s linear infinite; 
        }

        .notification { 
            position: fixed; 
            top: 20px; 
            right: 20px; 
            background: var(--surface); 
            border-left: 4px solid var(--primary); 
            padding: 15px; 
            border-radius: 10px; 
            display: none; 
            z-index: 1000;
        }
        
        .notification.show { 
            display: block; 
        }

        .pulse {
            animation: pulse 1s infinite;
        }
        
        @keyframes spin { 
            to { 
                transform: rotate(360deg); 
            } 
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-up {
            animation: slideUp 0.6s ease;
        }

        .fade-in {
            animation: fadeIn 0.6s ease;
        }

        /* –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ */
        ::-webkit-scrollbar {
            width: 0px;
        }

        /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
        @media (max-height: 700px) {
            .header {
                padding: 30px 20px 15px;
            }
            
            .favorite-avatar {
                width: 60px;
                height: 60px;
                font-size: 20px;
            }
            
            .key {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
            
            .phone-number {
                font-size: 30px;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω -->
    <div class="bg-animation"></div>

    <!-- –ó–∞–≥—Ä—É–∑—á–∏–∫ -->
    <div class="loader" id="loader">
        <div class="spinner"></div>
        <div id="loaderText">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div id="registerScreen" class="screen active">
        <div class="header slide-up">
            <div class="logo">
                <i class="fas fa-phone-alt"></i>
            </div>
            <h1>NeoPhone</h1>
            <p>–ü—Ä–µ–º–∏—É–º –≤–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏</p>
        </div>

        <div class="register-card">
            <h3 style="text-align: center; margin-bottom: 20px;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
            <input type="text" id="usernameInput" class="register-input" placeholder="–í–∞—à–µ –∏–º—è" maxlength="20">
            <input type="tel" id="phoneInput" class="register-input" placeholder="–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞" maxlength="15">
            <button id="registerBtn" class="register-btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
    </div>

    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="mainScreen" class="screen">
        <div class="header">
            <div class="logo">
                <i class="fas fa-phone-alt"></i>
            </div>
            <h1>NeoPhone</h1>
            <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="userName"></span></p>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å –≤–∫–ª–∞–¥–æ–∫ -->
        <div class="tab-bar fade-in">
            <div class="tab-indicator"></div>
            <div class="tab active" data-tab="favorites">
                <i class="fas fa-star"></i>
            </div>
            <div class="tab" data-tab="recent">
                <i class="fas fa-clock"></i>
            </div>
            <div class="tab" data-tab="contacts">
                <i class="fas fa-user"></i>
            </div>
            <div class="tab" data-tab="keypad">
                <i class="fas fa-square"></i>
            </div>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ -->
        <div class="content">
            <!-- –í–∫–ª–∞–¥–∫–∞ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ -->
            <div class="tab-content active" id="favorites">
                <div class="favorites-grid">
                    <a href="#" class="favorite-item">
                        <div class="favorite-avatar">–ú</div>
                        <div class="favorite-name">–ú–∞–º–∞</div>
                    </a>
                    <a href="#" class="favorite-item">
                        <div class="favorite-avatar">–ü</div>
                        <div class="favorite-name">–ü–∞–ø–∞</div>
                    </a>
                    <a href="#" class="favorite-item">
                        <div class="favorite-avatar">–ê</div>
                        <div class="favorite-name">–ê–Ω–Ω–∞</div>
                    </a>
                    <a href="#" class="favorite-item">
                        <div class="favorite-avatar">–ò</div>
                        <div class="favorite-name">–ò–≤–∞–Ω</div>
                    </a>
                    <a href="#" class="favorite-item">
                        <div class="favorite-avatar">–î</div>
                        <div class="favorite-name">–î—Ä—É–≥</div>
                    </a>
                    <a href="#" class="favorite-item">
                        <div class="favorite-avatar favorite-add">+</div>
                        <div class="favorite-name">–î–æ–±–∞–≤–∏—Ç—å</div>
                    </a>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –ù–µ–¥–∞–≤–Ω–∏–µ -->
            <div class="tab-content" id="recent">
                <div class="recent-calls">
                    <div class="call-item">
                        <div class="call-icon call-incoming">
                            <i class="fas fa-phone-alt"></i>
                        </div>
                        <div class="call-info">
                            <div class="call-name">–ú–∞–º–∞</div>
                            <div class="call-details">
                                <span>–í—Ö–æ–¥—è—â–∏–π</span> ‚Ä¢ <span>5 –º–∏–Ω –Ω–∞–∑–∞–¥</span>
                            </div>
                        </div>
                        <div class="call-time">14:25</div>
                    </div>
                    <div class="call-item">
                        <div class="call-icon call-outgoing">
                            <i class="fas fa-phone-alt"></i>
                        </div>
                        <div class="call-info">
                            <div class="call-name">–ê–Ω–Ω–∞</div>
                            <div class="call-details">
                                <span>–ò—Å—Ö–æ–¥—è—â–∏–π</span> ‚Ä¢ <span>1 —á–∞—Å –Ω–∞–∑–∞–¥</span>
                            </div>
                        </div>
                        <div class="call-time">13:30</div>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
            <div class="tab-content" id="contacts">
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" class="search-box" placeholder="–ü–æ–∏—Å–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤...">
                </div>
                <div class="contact-list">
                    <div class="contact-item">
                        <div class="contact-avatar">–ê</div>
                        <div class="contact-info">
                            <div class="contact-name">–ê–Ω–Ω–∞</div>
                            <div class="contact-phone">+7 (123) 456-78-90</div>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-avatar">–ò</div>
                        <div class="contact-info">
                            <div class="contact-name">–ò–≤–∞–Ω</div>
                            <div class="contact-phone">+7 (123) 456-78-91</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∞ –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ -->
            <div class="tab-content" id="keypad">
                <div class="keypad-container">
                    <div class="phone-number" id="phoneNumberDisplay">+7 (123) 456-78-94</div>
                    <div class="keypad">
                        <div class="key" data-number="1">
                            <div class="number">1</div>
                            <div class="letters"></div>
                        </div>
                        <div class="key" data-number="2">
                            <div class="number">2</div>
                            <div class="letters">ABC</div>
                        </div>
                        <div class="key" data-number="3">
                            <div class="number">3</div>
                            <div class="letters">DEF</div>
                        </div>
                        <div class="key" data-number="4">
                            <div class="number">4</div>
                            <div class="letters">GHI</div>
                        </div>
                        <div class="key" data-number="5">
                            <div class="number">5</div>
                            <div class="letters">JKL</div>
                        </div>
                        <div class="key" data-number="6">
                            <div class="number">6</div>
                            <div class="letters">MNO</div>
                        </div>
                        <div class="key" data-number="7">
                            <div class="number">7</div>
                            <div class="letters">PQRS</div>
                        </div>
                        <div class="key" data-number="8">
                            <div class="number">8</div>
                            <div class="letters">TUV</div>
                        </div>
                        <div class="key" data-number="9">
                            <div class="number">9</div>
                            <div class="letters">WXYZ</div>
                        </div>
                        <div class="key" data-number="*">
                            <div class="number">*</div>
                        </div>
                        <div class="key" data-number="0">
                            <div class="number">0</div>
                            <div class="letters">+</div>
                        </div>
                        <div class="key" data-number="#">
                            <div class="number">#</div>
                        </div>
                    </div>
                    <div class="call-controls">
                        <div class="control">
                            <div class="control-button">
                                <i class="fas fa-plus"></i>
                            </div>
                            <div class="control-label">–ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
                        </div>
                        <div class="control">
                            <div class="control-button key-call" id="makeCallBtn">
                                <i class="fas fa-phone-alt"></i>
                            </div>
                            <div class="control-label">–í—ã–∑–æ–≤</div>
                        </div>
                        <div class="control">
                            <div class="control-button key-delete" id="deleteBtn">
                                <i class="fas fa-delete-left"></i>
                            </div>
                            <div class="control-label">–£–¥–∞–ª–∏—Ç—å</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –∑–≤–æ–Ω–∫–∞ -->
    <div id="callScreen" class="screen">
        <div class="header">
            <div class="logo">NeoPhone</div>
            <p id="roomInfo">–ó–≤–æ–Ω–æ–∫...</p>
        </div>

        <div class="video-container">
            <video id="remoteVideo" class="remote-video" autoplay playsinline></video>
            <video id="localVideo" class="local-video" autoplay playsinline muted></video>
            <div id="waitingText" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: var(--text-secondary); text-align: center;">
                –û–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞...
            </div>
        </div>

        <div class="call-controls">
            <button id="micBtn" class="call-control-btn">üé§</button>
            <button id="cameraBtn" class="call-control-btn">üìπ</button>
            <button id="endCallBtn" class="call-control-btn end-call">üìû</button>
        </div>
    </div>

    <!-- –í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ -->
    <div id="incomingCall" class="incoming-call">
        <div class="caller-info">
            <div class="caller-avatar" id="callerAvatar">?</div>
            <div class="caller-name" id="callerName">–ó–≤–æ–Ω—è—â–∏–π</div>
            <div class="caller-phone" id="callerPhone">+7 XXX XXX-XX-XX</div>
            <div style="margin-top: 10px; color: var(--text-secondary);">–í–∞–º –∑–≤–æ–Ω—è—Ç...</div>
        </div>
        <div class="call-actions">
            <button id="acceptCallBtn" class="accept-call pulse">üìû</button>
            <button id="rejectCallBtn" class="reject-call">‚úñ</button>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div id="notification" class="notification">
        <div id="notificationText">–°–æ–æ–±—â–µ–Ω–∏–µ</div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    
    <!-- Agora SDK -->
    <script src="https://download.agora.io/sdk/release/AgoraRTC_N-4.18.2.js"></script>
    
    <script>
        // Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const firebaseConfig = {
            apiKey: "AIzaSyDvvp3qyBsQsZQfuwaImeZUZ4C0M9I912Q",
            authDomain: "skyberry-a31d8.firebaseapp.com",
            databaseURL: "https://skyberry-a31d8-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "skyberry-a31d8",
            storageBucket: "skyberry-a31d8.firebasestorage.app",
            messagingSenderId: "942887528624",
            appId: "1:942887528624:web:537f9f76d79d81be89b375",
            measurementId: "G-N2WKSHRB4L"
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // Agora –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const AGORA_APP_ID = "fc97c0f924ce4bec9389fa2cf4899e48";
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let client;
        let localTracks = [];
        let remoteUsers = {};
        let currentUser = null;
        let currentPhone = null;
        let incomingCallListener = null;
        let currentCallListener = null;

        // –≠–ª–µ–º–µ–Ω—Ç—ã
        const registerScreen = document.getElementById('registerScreen');
        const mainScreen = document.getElementById('mainScreen');
        const callScreen = document.getElementById('callScreen');
        const loader = document.getElementById('loader');
        const loaderText = document.getElementById('loaderText');
        const usernameInput = document.getElementById('usernameInput');
        const phoneInput = document.getElementById('phoneInput');
        const registerBtn = document.getElementById('registerBtn');
        const userName = document.getElementById('userName');
        const phoneNumberDisplay = document.getElementById('phoneNumberDisplay');
        const makeCallBtn = document.getElementById('makeCallBtn');
        const deleteBtn = document.getElementById('deleteBtn');
        const localVideo = document.getElementById('localVideo');
        const remoteVideo = document.getElementById('remoteVideo');
        const micBtn = document.getElementById('micBtn');
        const cameraBtn = document.getElementById('cameraBtn');
        const endCallBtn = document.getElementById('endCallBtn');
        const roomInfo = document.getElementById('roomInfo');
        const waitingText = document.getElementById('waitingText');
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notificationText');
        const incomingCall = document.getElementById('incomingCall');
        const callerAvatar = document.getElementById('callerAvatar');
        const callerName = document.getElementById('callerName');
        const callerPhone = document.getElementById('callerPhone');
        const acceptCallBtn = document.getElementById('acceptCallBtn');
        const rejectCallBtn = document.getElementById('rejectCallBtn');

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message, duration = 3000) {
            notificationText.textContent = message;
            notification.classList.add('show');
            setTimeout(() => notification.classList.remove('show'), duration);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Agora
        function initAgora() {
            try {
                if (typeof AgoraRTC === 'undefined') {
                    throw new Error('Agora SDK –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                }

                // –°–æ–∑–¥–∞–µ–º –∫–ª–∏–µ–Ω—Ç
                client = AgoraRTC.createClient({ mode: "rtc", codec: "vp8" });
                
                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
                client.on("user-published", async (user, mediaType) => {
                    await client.subscribe(user, mediaType);
                    showNotification('–£—á–∞—Å—Ç–Ω–∏–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è!');

                    if (mediaType === "video") {
                        const remoteTrack = user.videoTrack;
                        remoteVideo.srcObject = new MediaStream([remoteTrack.getMediaStreamTrack()]);
                        remoteTrack.play(remoteVideo);
                        waitingText.style.display = 'none';
                    }
                    
                    if (mediaType === "audio") {
                        user.audioTrack.play();
                    }

                    remoteUsers[user.uid] = user;
                });

                client.on("user-unpublished", (user) => {
                    showNotification('–£—á–∞—Å—Ç–Ω–∏–∫ –≤—ã—à–µ–ª');
                    if (remoteUsers[user.uid]) {
                        delete remoteUsers[user.uid];
                    }
                    if (Object.keys(remoteUsers).length === 0) {
                        waitingText.style.display = 'block';
                        remoteVideo.srcObject = null;
                    }
                });

                showNotification('Agora –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!');
                
            } catch (error) {
                const errorMsg = `–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Agora: ${error.message}`;
                showNotification(errorMsg);
                console.error('Agora error:', error);
            }
        }

        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function registerUser() {
            const username = usernameInput.value.trim();
            const phone = phoneInput.value.trim();
            
            if (!username || !phone) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');
                return;
            }

            loader.classList.add('active');
            loaderText.textContent = '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...';
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Firebase
            const userRef = database.ref('users/' + phone);
            
            userRef.set({
                name: username,
                phone: phone,
                online: true,
                lastSeen: Date.now()
            }).then(() => {
                currentUser = username;
                currentPhone = phone;
                userName.textContent = username;
                
                // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
                registerScreen.classList.remove('active');
                mainScreen.classList.add('active');
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Agora
                initAgora();
                
                // –ù–∞—á–∏–Ω–∞–µ–º —Å–ª—É—à–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏
                setupIncomingCallListener();
                
                loader.classList.remove('active');
                showNotification(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${username}!`);
                
            }).catch(error => {
                loader.classList.remove('active');
                showNotification('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ' + error.message);
                console.error('Registration error:', error);
            });
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–ª—É—à–∞—Ç–µ–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤
        function setupIncomingCallListener() {
            incomingCallListener = database.ref('calls/' + currentPhone);
            
            incomingCallListener.on('value', (snapshot) => {
                const callData = snapshot.val();
                
                if (callData && callData.status === 'ringing') {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞
                    callerName.textContent = callData.callerName;
                    callerPhone.textContent = callData.callerPhone;
                    callerAvatar.textContent = callData.callerName.charAt(0);
                    incomingCall.classList.add('active');
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID –∑–≤–æ–Ω–∫–∞ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è
                    currentCallListener = callData.callId;
                    
                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª–æ–Ω—è–µ–º –∑–≤–æ–Ω–æ–∫ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥
                    setTimeout(() => {
                        if (incomingCall.classList.contains('active')) {
                            rejectIncomingCall();
                        }
                    }, 30000);
                }
            });
        }

        // –ü—Ä–∏–Ω—è—Ç—å –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫
        function acceptIncomingCall() {
            const callRef = database.ref('calls/' + currentPhone);
            
            callRef.update({
                status: 'accepted'
            }).then(() => {
                incomingCall.classList.remove('active');
                
                // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ (–Ω–æ–º–µ—Ä –∑–≤–æ–Ω—è—â–µ–≥–æ = ID –∫–æ–º–Ω–∞—Ç—ã)
                joinRoom(callerPhone.textContent);
            });
        }

        // –û—Ç–∫–ª–æ–Ω–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫
        function rejectIncomingCall() {
            const callRef = database.ref('calls/' + currentPhone);
            
            callRef.update({
                status: 'rejected'
            }).then(() => {
                incomingCall.classList.remove('active');
                showNotification('–ó–≤–æ–Ω–æ–∫ –æ—Ç–∫–ª–æ–Ω–µ–Ω');
            });
        }

        // –°–æ–≤–µ—Ä—à–∏—Ç—å –∏—Å—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫
        function makeCall() {
            const targetPhone = phoneNumberDisplay.textContent.replace(/\D/g, '');
            
            if (!targetPhone || targetPhone === '+71234567894') {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');
                return;
            }
            
            if (targetPhone === currentPhone.replace(/\D/g, '')) {
                showNotification('–ù–µ–ª—å–∑—è –ø–æ–∑–≤–æ–Ω–∏—Ç—å —Å–∞–º–æ–º—É —Å–µ–±–µ');
                return;
            }
            
            loader.classList.add('active');
            loaderText.textContent = '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è...';
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
            const targetUserRef = database.ref('users/' + targetPhone);
            
            targetUserRef.once('value').then((snapshot) => {
                const targetUser = snapshot.val();
                
                if (!targetUser) {
                    loader.classList.remove('active');
                    showNotification('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω');
                    return;
                }
                
                // –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å –æ –∑–≤–æ–Ω–∫–µ
                const callRef = database.ref('calls/' + targetPhone);
                const callId = 'call_' + Date.now();
                
                callRef.set({
                    callerName: currentUser,
                    callerPhone: currentPhone,
                    status: 'ringing',
                    callId: callId,
                    createdAt: Date.now()
                }).then(() => {
                    loader.classList.remove('active');
                    showNotification(`–ó–≤–æ–Ω–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ${targetUser.name}...`);
                    
                    // –°–ª—É—à–∞–µ–º –æ—Ç–≤–µ—Ç –Ω–∞ –∑–≤–æ–Ω–æ–∫
                    const answerListener = callRef.on('value', (snapshot) => {
                        const callData = snapshot.val();
                        
                        if (callData && callData.status !== 'ringing') {
                            // –£–±–∏—Ä–∞–µ–º —Å–ª—É—à–∞—Ç–µ–ª—å
                            callRef.off('value', answerListener);
                            
                            if (callData.status === 'accepted') {
                                // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ (–Ω–æ–º–µ—Ä —Ü–µ–ª–µ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è = ID –∫–æ–º–Ω–∞—Ç—ã)
                                joinRoom(targetPhone);
                            } else {
                                showNotification('–ó–≤–æ–Ω–æ–∫ –æ—Ç–∫–ª–æ–Ω–µ–Ω');
                                callRef.remove();
                            }
                        }
                    });
                    
                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è–µ–º –∑–≤–æ–Ω–æ–∫ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥
                    setTimeout(() => {
                        callRef.off('value', answerListener);
                        callRef.remove();
                        showNotification('–ó–≤–æ–Ω–æ–∫ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç');
                    }, 30000);
                    
                }).catch(error => {
                    loader.classList.remove('active');
                    showNotification('–û—à–∏–±–∫–∞ –∑–≤–æ–Ω–∫–∞: ' + error.message);
                    console.error('Call error:', error);
                });
                
            }).catch(error => {
                loader.classList.remove('active');
                showNotification('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ' + error.message);
                console.error('User search error:', error);
            });
        }

        // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ
        async function joinRoom(roomId) {
            if (!client) {
                showNotification('Agora –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }

            try {
                loader.classList.add('active');
                loaderText.textContent = '–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ...';
                
                // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º—Å—è –∫ –∫–∞–Ω–∞–ª—É (–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ = ID –∫–æ–º–Ω–∞—Ç—ã)
                await client.join(AGORA_APP_ID, roomId, null, currentUser);
                
                // –°–æ–∑–¥–∞–µ–º –∏ –ø—É–±–ª–∏–∫—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–∫–∏
                const audioTrack = await AgoraRTC.createMicrophoneAudioTrack().catch(e => {
                    console.warn('Microphone error:', e);
                    showNotification('–ú–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                    return null;
                });
                
                const videoTrack = await AgoraRTC.createCameraVideoTrack().catch(e => {
                    console.warn('Camera error:', e);
                    showNotification('–ö–∞–º–µ—Ä–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞');
                    return null;
                });

                localTracks = [audioTrack, videoTrack].filter(track => track !== null);
                
                if (localTracks.length > 0) {
                    await client.publish(localTracks);
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ
                if (videoTrack) {
                    localVideo.srcObject = new MediaStream([videoTrack.getMediaStreamTrack()]);
                    videoTrack.play(localVideo);
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                roomInfo.textContent = `–ó–≤–æ–Ω–æ–∫: ${roomId}`;
                
                mainScreen.classList.remove('active');
                callScreen.classList.add('active');
                
                loader.classList.remove('active');
                showNotification(`–í—ã –≤ –∫–æ–º–Ω–∞—Ç–µ ${roomId}`);
                
            } catch (error) {
                loader.classList.remove('active');
                showNotification('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ' + error.message);
                console.error('Join error:', error);
            }
        }

        // –í—ã–π—Ç–∏ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã
        async function leaveRoom() {
            try {
                // –û—Ç–∫–ª—é—á–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–∫–∏
                localTracks.forEach(track => {
                    if (track && track.close) {
                        track.close();
                    }
                });
                localTracks = [];
                
                // –í—ã—Ö–æ–¥–∏–º –∏–∑ –∫–∞–Ω–∞–ª–∞
                if (client) {
                    await client.leave();
                }
                
                // –û—á–∏—â–∞–µ–º –≤–∏–¥–µ–æ
                localVideo.srcObject = null;
                remoteVideo.srcObject = null;
                
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
                callScreen.classList.remove('active');
                mainScreen.classList.add('active');
                waitingText.style.display = 'block';
                
                showNotification('–í—ã –≤—ã—à–ª–∏ –∏–∑ –∑–≤–æ–Ω–∫–∞');
                
            } catch (error) {
                console.error('Leave error:', error);
            }
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞
        micBtn.addEventListener('click', () => {
            const audioTrack = localTracks.find(track => track && track.trackMediaType === 'audio');
            if (audioTrack) {
                audioTrack.setEnabled(!audioTrack.enabled);
                micBtn.style.background = audioTrack.enabled ? 'var(--gradient)' : 'var(--accent)';
                showNotification(audioTrack.enabled ? '–ú–∏–∫—Ä–æ—Ñ–æ–Ω –≤–∫–ª—é—á–µ–Ω' : '–ú–∏–∫—Ä–æ—Ñ–æ–Ω –≤—ã–∫–ª—é—á–µ–Ω');
            }
        });

        cameraBtn.addEventListener('click', () => {
            const videoTrack = localTracks.find(track => track && track.trackMediaType === 'video');
            if (videoTrack) {
                videoTrack.setEnabled(!videoTrack.enabled);
                cameraBtn.style.background = videoTrack.enabled ? 'var(--gradient)' : 'var(--accent)';
                localVideo.style.display = videoTrack.enabled ? 'block' : 'none';
                showNotification(videoTrack.enabled ? '–ö–∞–º–µ—Ä–∞ –≤–∫–ª—é—á–µ–Ω–∞' : '–ö–∞–º–µ—Ä–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞');
            }
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const indicator = document.querySelector('.tab-indicator');

        function switchTab(tab) {
            const tabId = tab.getAttribute('data-tab');
            
            tabs.forEach(t => t.classList.remove('active'));
            tabContents.forEach(c => c.classList.remove('active'));
            
            tab.classList.add('active');
            document.getElementById(tabId).classList.add('active');
            
            const tabIndex = Array.from(tabs).indexOf(tab);
            indicator.style.transform = `translateX(${tabIndex * 100}%)`;
        }

        tabs.forEach(tab => {
            tab.addEventListener('click', () => switchTab(tab));
        });

        // –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        document.querySelectorAll('.key').forEach(key => {
            key.addEventListener('click', function() {
                const number = this.getAttribute('data-number');
                if (number) {
                    if (phoneNumberDisplay.textContent === '+7 (123) 456-78-94') {
                        phoneNumberDisplay.textContent = number;
                    } else {
                        phoneNumberDisplay.textContent += number;
                    }
                    
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 150);
                }
            });
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è
        deleteBtn.addEventListener('click', function() {
            let currentNumber = phoneNumberDisplay.textContent;
            if (currentNumber.length > 1 && currentNumber !== '+7 (123) 456-78-94') {
                phoneNumberDisplay.textContent = currentNumber.slice(0, -1);
            } else {
                phoneNumberDisplay.textContent = '+7 (123) 456-78-94';
            }
            
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 150);
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ –≤—ã–∑–æ–≤–∞
        makeCallBtn.addEventListener('click', function() {
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 150);
            
            makeCall();
        });

        // –°–ª—É—à–∞—Ç–µ–ª–∏ —Å–æ–±—ã—Ç–∏–π
        registerBtn.addEventListener('click', registerUser);
        endCallBtn.addEventListener('click', leaveRoom);
        acceptCallBtn.addEventListener('click', acceptIncomingCall);
        rejectCallBtn.addEventListener('click', rejectIncomingCall);

        // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∞
        usernameInput.value = 'User' + Math.floor(Math.random() * 1000);
        phoneInput.value = '+7' + Math.floor(9000000000 + Math.random() * 1000000000);

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            showNotification('–°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        });
    </script>
</body>
    </html>
